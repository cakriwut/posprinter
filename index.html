
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>print Demo</title>
    </title>
    <link href="https://cdn.bootcdn.net/ajax/libs/mui/3.7.1/css/mui.min.css" rel="stylesheet">
    <style>
        @charset"utf-8";

        html {
            color: #000;
            background: #fff;
            overflow-y: scroll;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%
        }

        html * {
            outline: 0;
            -webkit-text-size-adjust: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
        }

        html,
        body {
            font-family: sans-serif
        }

        body,
        div,
        dl,
        dt,
        dd,
        ul,
        ol,
        li,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        pre,
        code,
        form,
        fieldset,
        legend,
        input,
        textarea,
        p,
        blockquote,
        th,
        td,
        hr,
        button,
        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        menu,
        nav,
        section {
            margin: 0;
            padding: 0
        }

        input,
        select,
        textarea {
            font-size: 100%
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        abbr,
        acronym {
            border: 0;
            font-variant: normal
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 500
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: 100%;
            font-weight: 500
        }

        q:before,
        q:after {
            content: ''
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a:hover {
            text-decoration: underline
        }

        ins,
        a {
            text-decoration: none
        }

        .contianer {
            padding: 0.3rem 0.2rem;
        }

        .mobile-select-box {
            position: relative;
            display: inline-block;
        }

        .mobile-select-box .mobile-select-selectd {
            width: 3rem;
            height: 0.62rem;
            line-height: 0.63rem;
            color: #666;
            border-radius: 0.15rem;
            border: 1px solid #ddd;
            padding: 0 0.5rem;
            font-size: 0.3rem;
            cursor: pointer;
            position: relative;
        }

        .mobile-select-box .mobile-select-selectd::after {
            border: 0.1rem solid transparent;
            content: ' ';
            height: 0;
            position: absolute;
            width: 0;
            top: 0.23rem;
            border-top: 0.15rem solid #666;
            right: 0.15rem;

        }

        .mobile-select-box.focus .mobile-select-selectd {
            box-shadow: 0 0.1rem 0.5rem rgb(0 0 0 / 20%);
        }

        .mobile-select-box .mobile-select-list {
            width: 100%;
            border-radius: 0.1rem;
            box-shadow: 0 0.1rem 0.5rem rgb(0 0 0 / 20%);
            background-color: #fff;
            padding: 0.3rem 0;
            position: absolute;
            top: 0.85rem;
            left: 0;
            z-index: 999;
            display: none;
        }

        .mobile-select-box .mobile-select-list::before {
            border: 0.1rem solid transparent;
            content: ' ';
            height: 0;
            position: absolute;
            width: 0;
            top: -0.24rem;
            border-bottom: 0.15rem solid #fff;
            box-shadow: 0 0.1rem 0.5rem rgb(0 0 0 / 20%);
            right: 0.3rem;
        }

        .mobile-select-box .mobile-select-list .mobile-select-list-item:hover {
            background-color: rgba(189, 176, 176, 0.3);
        }

        .mobile-select-box .mobile-select-list .mobile-select-list-item.selectd {
            color: rgb(131, 121, 244);
        }

        .mobile-select-box .mobile-select-list .mobile-select-list-item {
            padding: 0 0.5rem;
            line-height: 0.64rem;
            cursor: pointer;
        }

        .print-box {
            display: flex;
            justify-content: space-around;
            /* justify-content: space-between; */
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .print-box .print-box-item:hover {
            box-shadow: 0 0.1rem 0.5rem rgb(0 0 0 / 20%);
        }

        .print-box .print-box-item {
            width: 3rem;
            height: 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-bottom: 0.2rem;
            border-radius: 0.1rem;
            background-color: #ddd;
        }
    </style>
    <style>
        html {
            border: 0px solid #FFFFFF !important;
        }

        body {
            font-size: 12px !important;
            font-family: Arial;
            background-color: #F5F5F5;
            color: #333333;
            border: 0px solid #FFFFFF !important;
        }

        #PrintContent {
            width: 556px;
            padding: 20px 10px;
            line-height: 35px;
            overflow: auto;
            background-color: #FFFFFF;
            border: 0px solid #FFFFFF !important;
        }

        .clearboth {
            clear: both;
        }

        .fs12 {
            font-size: 12px !important;
        }

        .fs13 {
            font-size: 13px !important;
        }

        .fs16 {
            font-size: 28px !important;
        }

        .fs18 {
            font-size: 30px !important;
        }

        .fs28 {
            font-size: 28px !important;
        }

        .fs22 {
            font-size: 28px !important;
        }

        .center {
            text-align: center;
        }

        .left {
            float: left;
        }

        .right {
            float: right;
        }

        .mgt5 {
            margin-top: 5px;
        }

        .mgt10 {
            margin-top: 20px;
        }

        .pdt20 {
            padding-top: 20px;
        }

        .pdt10 {
            padding-top: 20px;
        }

        .line {
            border-bottom: 1px dotted #333333;
            height: 5px;
        }

        .middle {
            position: absolute;
            right: 80px;
            width: 20px;
            text-align: center;
        }

        .relative {
            position: relative;
        }

        .mgl20 {
            margin-left: 20px;
        }

        .PrintEvent {
            width: 90px;
            height: 35px;
            font-size: 28px;
            background-color: #0050F1;
            color: #FFFFFF;
            text-align: center;
            border: 0px;
            margin: 20px auto;
            display: inherit;
            border-radius: 5px;
            cursor: pointer;
        }

        .PrintEvent:hover {
            background-color: #0146d2;
        }
    </style>
</head>

<body>
    <div class="contianer">
        <div class="print-box">
           
            <div class="print-box-item">
                print Image
            </div>
        </div>
    </div>



    <div id="printImages" >

        <div id="PrintContent">
            <div style="padding-top:0px;width: 100%;text-align: center;">                
				<img src="https://cakriwut.github.io/posprinter/servicesg.png" style="max-width:260px;display:inline-block">
            </div>
            <div style="text-align:center;font-size: 36px;font-weight:500px; font-family:Arial, Helvetica, sans-serif ;margin-top: 10px;">The Frontier Community Club</div>
            <div style="text-align:center;margin-top: 40px;font-size: 30px;font-weight:bold; font-family:Arial, Helvetica, sans-serif ;">
                Queue No.                
            </div>
            <div style="text-align:center;margin-top: 60px;font-size: 88px;font-weight:bolder; font-family:Arial, Helvetica, sans-serif ;">
                W010
            </div>
            <div style="text-align:center;margin-top: 40px;font-size: 26px;font-weight:bold; font-family:Arial, Helvetica, sans-serif ;">
                Arrived:  24-03-2022 08:00 AM
            </div>
            <div style="text-align:center;margin-top: 30px;font-size: 40px;font-weight:bolder; font-family:Arial, Helvetica, sans-serif ;">
                SSO                
            </div>
            <div style="text-align:center;margin-top: 30px;font-size: 30px; font-family:Arial, Helvetica, sans-serif ;">
                There are <u><b>10 person(s) ahead</b></u> of you
            </div>        
        </div>
    </div>
</body>

</html>


<script type="text/javascript" src="./iminPrint.js"></script>
<script type="text/javascript" src="./dom-to-image.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">

    $('.print-box-item').off('click').on('click', function (e) {
        e.stopPropagation();
        var device = '192.168.18.39'
        var IminPrintInstance = iminPrint(device);           
        init(IminPrintInstance);
    });
    $('#PrintContent').show();
    function init(Instance) {
        
        Instance.connect(function (ws) {
            if (ws.readyState == ws.OPEN) {
                
                $('#PrintContent').show();
                var node = $('#PrintContent')[0];//

                //var clone = node.cloneNode(true);
                //node.css('display','block'); //.getElementById('PrintContent');
                //var printArea = node[0];
               // node.css('display','none');
                //node.style.display = "block"
                domtoimage.toJpeg(node).then(function (dataUrl) {
                    $('#PrintContent').hide();
                    //node.parent().css('display','none');
                    Instance.printSingleBitmap(dataUrl);
                    setTimeout(function() {
                        Instance.printAndFeedPaper(125);
                        Instance.partialCut();                        
                        //Instance.printAndFeedPaper(100); 
                    },600);                         
                }); 
            }
        });
    }

</script>